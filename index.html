<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML-GARDEN</title>

    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="favicons/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="favicons/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="48x48" href="favicons/favicon-48x48.png">
    <link rel="apple-touch-icon" sizes="180x180" href="favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="favicons/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="favicons/android-chrome-512x512.png">

    <!-- Open Graph / Telegram Preview -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="HTML-GARDEN">
    <meta property="og:image" content="https://www.html-garden.fun/image/icon.png">
    <meta property="og:url" content="https://www.html-garden.fun/index.html">
    <meta name="twitter:card" content="summary_large_image">

    <!-- DNS Prefetch для ускорения -->
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">

    <!-- Preload критичных ресурсов -->
    <link rel="preload" href="mainpage.css" as="style">
    <link rel="preload" href="image/welcome to html-garden.webp" as="image">

    <link rel="stylesheet" href="mainpage.css">
</head>
<body>
    <!-- Фон загружается динамически через JavaScript -->

    <div class="main-content">
        <picture>
            <source srcset="image/welcome to html-garden.webp" type="image/webp">
            <img src="image/welcome to html-garden.png" alt="Welcome to HTML-GARDEN" class="main-title" loading="eager">
        </picture>

        <div class="shapka">
            <a href="manual.html" class="nav-link nav-manual">manual</a>
            <a href="description.html" class="nav-link nav-description">description</a>
            <a href="garden.html" class="nav-link nav-garden">HTML-GARDEN</a>
        </div>
    </div>

    <div class="copyright">
        <a href="https://cryptonerf.github.io/portfolio/" target="_blank" rel="noopener noreferrer">Copyright © 2025 Émile Alexanyan</a>
    </div>

    <script>
        // Определяем устройства
        const isAndroid = /Android/i.test(navigator.userAgent);
        const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

        // Подключаем шрифт только для Android
        if (isAndroid) {
            const link = document.createElement('link');
            link.rel = 'stylesheet';
            link.href = 'https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap';
            document.head.appendChild(link);

            const style = document.createElement('style');
            style.textContent = `
                body, .nav-link, .copyright, .copyright a {
                    font-family: 'Comic Neue', 'Comic Sans MS', cursive !important;
                }
            `;
            document.head.appendChild(style);
        }

        // Динамически загружаем только нужный фон
        function loadBackground() {
            let backgroundElement;

            if (isIOS) {
                // iOS - APNG
                backgroundElement = document.createElement('img');
                backgroundElement.src = 'image/butterflies_mobile.apng';
                backgroundElement.className = 'background-video';
                backgroundElement.alt = '';
            } else if (isAndroid) {
                // Android - WebP 720p
                backgroundElement = document.createElement('img');
                backgroundElement.src = 'image/butterwebp_720p.webp';
                backgroundElement.className = 'background-video';
                backgroundElement.alt = '';
            } else if (isMobile) {
                // Другие мобильные - APNG
                backgroundElement = document.createElement('img');
                backgroundElement.src = 'image/butterflies_mobile.apng';
                backgroundElement.className = 'background-video';
                backgroundElement.alt = '';
            } else {
                // Desktop - WebP 4K
                backgroundElement = document.createElement('img');
                backgroundElement.src = 'image/butterwebp.webp';
                backgroundElement.className = 'background-video';
                backgroundElement.alt = '';
            }

            // Вставляем фон в начало body
            document.body.insertBefore(backgroundElement, document.body.firstChild);
        }

        // Загружаем фон после загрузки основного контента
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', loadBackground);
        } else {
            loadBackground();
        }
    </script>
</body>
</html>